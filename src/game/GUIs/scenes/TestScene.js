var TestScene = cc.Scene.extend({
    ctor: function () {
        this._super();
        cc.log("INIT SCENE")


        cc.eventManager.addListener({
            event: cc.EventListener.TOUCH_ONE_BY_ONE,
            swallowTouches: true,

            onTouchBegan: function (event) {
                let gridMap = [[0,0,0,0,0,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0,0,0,0,0,0,0],[0,47,47,0,0,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,25,25,0,0,0,34,34,34,0,0,0,0,26,26,0,0],[0,47,47,0,0,0,0,0,6,6,0,33,33,33,0,0,0,0,27,27,0,0,0,0,25,25,0,0,0,34,34,34,0,0,0,0,26,26,0,0],[0,0,0,0,0,0,0,0,6,6,0,0,0,0,0,0,0,0,27,27,0,0,0,0,54,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,54,54,0,0,0,0,0,0,0,0,0,0,0,28,28,0],[0,7,7,0,0,41,41,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,0],[0,7,7,0,0,41,41,41,0,0,0,0,55,55,0,0,0,0,57,57,57,0,0,0,0,0,0,0,0,0,29,29,0,0,0,0,0,0,0,0],[0,0,0,0,0,41,41,41,0,0,0,0,55,55,0,0,0,0,57,57,57,0,0,0,0,0,0,0,0,0,29,29,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,57,57,0,0,0,20,20,0,0,9,9,0,0,0,58,58,58,0,30,30,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,20,0,0,9,9,0,0,0,58,58,58,0,30,30,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58,58,58,0,0,0,0],[0,0,0,0,0,0,31,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,31,31,0,0,0,59,59,59,0,0,0,0,51,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,35,35,35,0,0,0,0,0,0,0,59,59,59,0,0,0,0,51,51,0,0,42,42,42,0,0,0,0,0,10,10,0,0,0,0,0,0,0,0],[0,35,35,35,0,0,0,0,0,0,0,59,59,59,0,0,0,0,0,0,0,0,42,42,42,0,0,0,0,0,10,10,0,0,0,0,48,48,0,0],[0,35,35,35,0,32,32,0,0,0,0,0,0,0,0,0,0,52,52,0,0,0,42,42,42,0,0,0,0,0,0,0,0,0,0,0,48,48,0,0],[0,0,0,0,0,32,32,0,0,0,0,0,0,0,0,0,0,52,52,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,60,60,60,0,0,15,15,0,0,0,0],[0,0,0,0,0,0,36,36,36,0,0,0,0,0,44,44,0,0,0,0,4,4,0,0,0,0,0,0,0,60,60,60,0,0,0,0,0,11,11,0],[0,0,0,0,0,0,36,36,36,0,0,0,0,0,44,44,0,0,1,1,1,1,0,0,0,0,0,0,0,60,60,60,0,0,0,0,0,11,11,0],[0,0,0,0,0,0,36,36,36,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,21,21,0,0,0,0,0,0,0,8,8,0,0,16,16,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,21,21,0,0,0,0,0,0,0,8,8,0,0,16,16,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,12,0],[0,0,0,0,0,0,49,49,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,12,0],[22,22,0,0,0,0,49,49,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[22,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,45,45,0,0,0,0,0,17,17,0,0,0,0,0,56,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,61,61,61,0,0,0,0,45,45,0,0,0,0,0,17,17,0,0,46,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,61,61,61,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,61,61,61,0,0,0,0,0,0,0,0,43,43,43,0,0,0,0,0,0,0,0,0,62,62,62,0,0,0,0,13,13,0,0,0,14,14,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,43,43,43,0,0,0,0,50,50,0,23,23,62,62,62,0,0,0,0,13,13,0,0,0,14,14,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,43,43,43,0,0,0,0,50,50,0,23,23,62,62,62,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,53,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,37,37,37,0,0,0,0,38,38,38,0,0,0,18,18,0,0,0,0,53,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,37,37,37,0,0,0,0,38,38,38,0,0,0,18,18,0,0,0,0,0,0,0,0,0,0,0,19,19,0,0,39,39,39,0,0,0,0],[0,0,0,37,37,37,0,0,0,0,38,38,38,0,0,0,0,0,0,0,0,40,40,40,0,0,0,0,0,19,19,0,0,39,39,39,0,0,0,0],[0,24,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,40,40,0,0,0,0,0,0,0,0,0,39,39,39,0,0,0,0],[0,24,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,40,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]

                const algorithm = AlgorithmImplement.getInstance();
                algorithm.setGridMapStar(gridMap);


                var result = algorithm.searchPathByAStar([0,0],[39,8]);

                cc.log("RESULT ::: \n" + result)

                for(let i =0; i<result.length; i++){
                    let row = result[i].x;
                    let col = result[i].y;
                    if (gridMap[row] && gridMap[row][col] !== undefined) {
                        gridMap[row][col] = "@";
                    }
                }

                let result_map = new Graph(gridMap)

                cc.log("PATH ::: \n" + result_map.toString());


                cc.log("----------------------------------------------------------------------------------------------\n")

                algorithm.searchPathByAStar([0,0],[39,8]);
                cc.log("----------------------------------------------------------------------------------------------\n")

                let gridMap1 = [[1,0,0,1,3,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0,0,0,0,0,0,0],[0,47,47,0,0,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,25,25,0,0,0,34,34,34,0,0,0,0,26,26,0,0],[0,47,47,0,0,0,0,0,6,6,0,33,33,33,0,0,0,0,27,27,0,0,0,0,25,25,0,0,0,34,34,34,0,0,0,0,26,26,0,0],[0,0,0,0,0,0,0,0,6,6,0,0,0,0,0,0,0,0,27,27,0,0,0,0,54,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,54,54,0,0,0,0,0,0,0,0,0,0,0,28,28,0],[0,7,7,0,0,41,41,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,0],[0,7,7,0,0,41,41,41,0,0,0,0,55,55,0,0,0,0,57,57,57,0,0,0,0,0,0,0,0,0,29,29,0,0,0,0,0,0,0,0],[0,0,0,0,0,41,41,41,0,0,0,0,55,55,0,0,0,0,57,57,57,0,0,0,0,0,0,0,0,0,29,29,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,57,57,0,0,0,20,20,0,0,9,9,0,0,0,58,58,58,0,30,30,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,20,0,0,9,9,0,0,0,58,58,58,0,30,30,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58,58,58,0,0,0,0],[0,0,0,0,0,0,31,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,31,31,0,0,0,59,59,59,0,0,0,0,51,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,35,35,35,0,0,0,0,0,0,0,59,59,59,0,0,0,0,51,51,0,0,42,42,42,0,0,0,0,0,10,10,0,0,0,0,0,0,0,0],[0,35,35,35,0,0,0,0,0,0,0,59,59,59,0,0,0,0,0,0,0,0,42,42,42,0,0,0,0,0,10,10,0,0,0,0,48,48,0,0],[0,35,35,35,0,32,32,0,0,0,0,0,0,0,0,0,0,52,52,0,0,0,42,42,42,0,0,0,0,0,0,0,0,0,0,0,48,48,0,0],[0,0,0,0,0,32,32,0,0,0,0,0,0,0,0,0,0,52,52,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,60,60,60,0,0,15,15,0,0,0,0],[0,0,0,0,0,0,36,36,36,0,0,0,0,0,44,44,0,0,0,0,4,4,0,0,0,0,0,0,0,60,60,60,0,0,0,0,0,11,11,0],[0,0,0,0,0,0,36,36,36,0,0,0,0,0,44,44,0,0,1,1,1,1,0,0,0,0,0,0,0,60,60,60,0,0,0,0,0,11,11,0],[0,0,0,0,0,0,36,36,36,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,21,21,0,0,0,0,0,0,0,8,8,0,0,16,16,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,21,21,0,0,0,0,0,0,0,8,8,0,0,16,16,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,12,0],[0,0,0,0,0,0,49,49,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,12,0],[22,22,0,0,0,0,49,49,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[22,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,45,45,0,0,0,0,0,17,17,0,0,0,0,0,56,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,61,61,61,0,0,0,0,45,45,0,0,0,0,0,17,17,0,0,46,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,61,61,61,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,61,61,61,0,0,0,0,0,0,0,0,43,43,43,0,0,0,0,0,0,0,0,0,62,62,62,0,0,0,0,13,13,0,0,0,14,14,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,43,43,43,0,0,0,0,50,50,0,23,23,62,62,62,0,0,0,0,13,13,0,0,0,14,14,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,43,43,43,0,0,0,0,50,50,0,23,23,62,62,62,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,53,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,37,37,37,0,0,0,0,38,38,38,0,0,0,18,18,0,0,0,0,53,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,37,37,37,0,0,0,0,38,38,38,0,0,0,18,18,0,0,0,0,0,0,0,0,0,0,0,19,19,0,0,39,39,39,0,0,0,0],[0,0,0,37,37,37,0,0,0,0,38,38,38,0,0,0,0,0,0,0,0,40,40,40,0,0,0,0,0,19,19,0,0,39,39,39,0,0,0,0],[0,24,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,40,40,0,0,0,0,0,0,0,0,0,39,39,39,0,0,0,0],[0,24,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,40,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]
                algorithm.setGridMapStar(gridMap);
                algorithm.searchPathByAStar([0,0],[39,8]);

                return true;
            }.bind(this),


        }, this);



    },

    testTroop: function (touch) {
        var locationInScreen = touch.getLocation();
        let troop = new Troop("ARM_1",1);
        // troop.setPosition(this.getScreenPosFromGridPos(cc.p(locationInScreen.x, locationInScreen.y)));
        troop.setPosition(locationInScreen.x, locationInScreen.y);
        this.addChild(troop);

        cc.log("ADD TROOP FOR TESTING WITH POSITION X: "+locationInScreen.x + " Y: "+locationInScreen.y)
    },


})